---
date: 2022-12-08 15:54:44
author: WangXinYi
img: /images/homePage/后端常见业务实现.webp
top: false
summary: Java后端常用业务总结
categories:
  - Java
tags:
  - Java
typora-root-url: ..
---

# Java常用后端业务总结

## 分页查询与返回

### 一、Mybatis-Plus自带的分页

#### 1、config包中新建MybatisPlusConfig

Mybatis-Plus的分页功能默认是不开启的，需要通过配置开启

```java
@Configuration
//@MapperScan("scan.your.mapper.package") 如果全局配过就不用
public class MybatisPlusConfig {
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        //拦截器主体
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        //创建内部拦截器-分页拦截器
        PageintionInnerInterceptor pageintionInnerInterceptor = new PageintionInnerInterceptor();
        //告诉他我们用什么数据库
        pageintionInnerInterceptor.setDbType(DbType.MYSQL);
        //把内部拦截器添加到拦截器的主体里
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.H2));
        return interceptor;
    }

    @Bean
    public ConfigurationCustomizer configurationCustomizer() {
        return configuration -> configuration.setUseDeprecatedExecutor(false);
    }
}
```

#### 2、控制层代码

```java
@RestController
@RequestMapping('/hello')
public class ProductController{
    @Autowired
    private ProductService productService;
	// 在yml中声明
    // page:
    //     num: 1
    //     size:10
    
    // 注入如下代码
    // @Value("${page.num}")
	// private Integer num
    
    // 之后defaltValue ="1"可以用num代替
    @GetMapping('/listByPage')
    public ResultVo listByPage(@RequestParam(defaltValue ="1") Integer pageNum
                              @RequestParam(defaltValue ="10") Integer pageSize)
        return ProductService.listByPage(pageNum, pageSize);
}
```

#### 3、服务层接口和实现类

**实现类**

```java
    @Autowired
    private ProductMapper productMapper;
    @Override
    public ResultVO listByPage(Integer pageNum, Integer pageSize){
    	Page page = new Page(pageNum, pageSize);
    	IPage iPage = ProductMapper.selectPage(page, null);
    	return ResultVO.success(iPage);
    }
```

#### 4、持久层

Mybatis-Plus的**BaseMapper已经提供了，直接使用即可**

#### 5、查看详细的日志

在yml中声明 

```yml
logging:
	level:
	# 把xxx换成自己的包名
		com.xxx.mapper:trace
	# 会省略日志时间信息等看起来更直观
	pattern:
		console: '%p%m%n'
```

### 二、Mybatis里的插件Pagehelper

Mybatis里的插件Pagehelper



最底层是序列化层：序列化的话就是把Java对象转化为byte数组，pb，hessian

网络层：建立连接，维护连接池，处理读写请求，Netty

协议层：消息头（整个消息的控制位和整个消息的长度）消息体，一些有效的负载信息

注册中心：让客户端感知到有那些server实例，再通过负载均衡器

配置模块：配置RPC框架的一些特性和开关，





## 分布式的主键生成方案

### 一、UUID

**UUID 全局甚至全球唯一，太长了，数据量比较大**

### 二、全局Redis 

网络开销太大！

### 三、分布式ID生成器

开源的推特的snowflake(雪花算法) 

## 分布式无状态的权限管理



## 有状态的用户登录管理





## 短信验证码和随机验证码





## 百万级数据量Excel导入导出及优化





## PDF的导出与生成



## 文件的上传和存储



## 自定义代码生成器CRUD



## 工作流管理

### 一、Activiti工作流管理

<img src="/images/%E5%90%8E%E7%AB%AF%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1/image-20230308185743758.png" alt="image-20230308185743758" style="zoom:50%;" />

